#  Генератор промокодов <br /><br />1. О чём проект?

#### Генерирует промокоды и сохраняет их в файл в папке `download` 


# 2. Начало работы

Запускать можно 2 вариантами:
<details>
 <summary>
 Через Flask
 </summary>

1. В админке django создается запись в DataBase. При создании записи отправляется запрос с id к Flask

2. Flask ожидает по API `<HOST>/api/v1/code_generator/id/<string:id>` id записи. Получает из БД настройки для генерации промокодов. По окончании генеарции делает запись в БД с сылкой на файл для скачивания.  

3. Файл можно получить потом по url `<HOST>/api/v1/code_generator/download/<string:path>`  

</details>
<details>
 <summary>
 Через GUI
 </summary>

1. Запускается через GUI

2. Из GUI получаем настройки и генерируем промокоды.  

3. Файл можно получить в папке 'download'
</details>

# 3. Запуск c Flask в Docer-Compose

`docker-compose run -d`

# 4. GUI
## 4.1. Poetry (инструмент для работы с виртуальным окружением и сборки пакетов) <a id="poetry"></a>

Poetry - это инструмент для управления зависимостями и виртуальными окружениями, также может использоваться для сборки пакетов. В этом проекте Poetry необходим для дальнейшей разработки приложения.

<details>
 <summary>
 Как скачать и установить?
 </summary>

### Установка:

Установите poetry следуя [инструкции с официального сайта](https://python-poetry.org/docs/#installation).

После установки перезапустите оболочку и введите команду

```shell
poetry --version
```

Если установка прошла успешно, вы получите ответ в формате

> Poetry version 1.3

Для дальнейшей работы введите команду:

```shell
poetry config virtualenvs.in-project true
```

Выполнение данной команды необходимо для создания виртуального окружения в
папке.

После предыдущей команды создадим виртуальное окружение с
помощью команды

```shell
poetry install
```

Результатом выполнения команды станет создание в корне проекта папки .venv.
Зависимости для создания окружения берутся из файлов poetry.lock (приоритетнее)
и pyproject.toml

</details>

## 4.2. Postgres 
Если у вас нет БД, для тестирования вы можете запустить `docker-compose run -d postgres`

GUI не создает таблицы для записи. Для создания таблиц вы можете воспользоваться миграциями из Django

## 4.3 Запуск

Для запуска введите команду
```shell
python main_gui```